#pragma once
#include <type_traits>

template<typename F,typename = typename std::enable_if<std::is_floating_point<F>::value>::type>
struct mat4f
{
    F m[4][4];
    //all possible operators
    operator+(mat4f<F> &r){
        r[0][0]+=m[0][0];r[0][1]+=m[0][1];r[0][2]+=m[0][2];r[0][3]+=m[0][3];
        r[1][0]+=m[1][0];r[1][1]+=m[1][1];r[1][2]+=m[1][2];r[1][3]+=m[1][3];
        r[2][0]+=m[2][0];r[2][1]+=m[2][1];r[2][2]+=m[2][2];r[2][3]+=m[2][3];
        r[3][0]+=m[3][0];r[3][1]+=m[3][1];r[3][2]+=m[3][2];r[3][3]+=m[3][3];
        return r;
    }operator-(mat4f<F> &r){
        r[0][0]-=m[0][0];r[0][1]-=m[0][1];r[0][2]-=m[0][2];r[0][3]-=m[0][3];
        r[1][0]-=m[1][0];r[1][1]-=m[1][1];r[1][2]-=m[1][2];r[1][3]-=m[1][3];
        r[2][0]-=m[2][0];r[2][1]-=m[2][1];r[2][2]-=m[2][2];r[2][3]-=m[2][3];
        r[3][0]-=m[3][0];r[3][1]-=m[3][1];r[3][2]-=m[3][2];r[3][3]-=m[3][3];
        return r;
    }operator*(mat4f<F> &r){
        r[0][0]=m[0][0]*r.m[0][0]+m[0][1]*r.m[1][0]+m[0][2]*r.m[2][0]+m[0][3]*r.m[3][0];
        r[0][1]=m[0][0]*r.m[0][1]+m[0][1]*r.m[1][1]+m[0][2]*r.m[2][1]+m[0][3]*r.m[3][1];
        r[0][2]=m[0][0]*r.m[0][2]+m[0][1]*r.m[1][2]+m[0][2]*r.m[2][2]+m[0][3]*r.m[3][2];
        r[0][3]=m[0][0]*r.m[0][3]+m[0][1]*r.m[1][3]+m[0][2]*r.m[2][3]+m[0][3]*r.m[3][3];
        return r;
    }operator=(mat4f<F> &r){
        m[0][0]=r.m[0][0];m[0][1]=r.m[0][1];m[0][2]=r.m[0][2];m[0][3]=r.m[0][3];
        m[1][0]=r.m[1][0];m[1][1]=r.m[1][1];m[1][2]=r.m[1][2];m[1][3]=r.m[1][3];
        m[2][0]=r.m[2][0];m[2][1]=r.m[2][1];m[2][2]=r.m[2][2];m[2][3]=r.m[2][3];
        m[3][0]=r.m[3][0];m[3][1]=r.m[3][1];m[3][2]=r.m[3][2];m[3][3]=r.m[3][3];
        return *this;
    }operator*=(mat4f<F> &r){
        m[0][0]*=r.m[0][0];m[0][1]*=r.m[0][1];m[0][2]*=r.m[0][2];m[0][3]*=r.m[0][3];
        m[1][0]*=r.m[1][0];m[1][1]*=r.m[1][1];m[1][2]*=r.m[1][2];m[1][3]*=r.m[1][3];
        m[2][0]*=r.m[2][0];m[2][1]*=r.m[2][1];m[2][2]*=r.m[2][2];m[2][3]*=r.m[2][3];
        m[3][0]*=r.m[3][0];m[3][1]*=r.m[3][1];m[3][2]*=r.m[3][2];m[3][3]*=r.m[3][3];
        return *this;
    }operator/=(mat4f<F> &r){
        m[0][0]/=r.m[0][0];m[0][1]/=r.m[0][1];m[0][2]/=r.m[0][2];m[0][3]/=r.m[0][3];
        m[1][0]/=r.m[1][0];m[1][1]/=r.m[1][1];m[1][2]/=r.m[1][2];m[1][3]/=r.m[1][3];
        m[2][0]/=r.m[2][0];m[2][1]/=r.m[2][1];m[2][2]/=r.m[2][2];m[2][3]/=r.m[2][3];
        m[3][0]/=r.m[3][0];m[3][1]/=r.m[3][1];m[3][2]/=r.m[3][2];m[3][3]/=r.m[3][3];
        return *this;
    }operator/(mat4f<F> &r){
        r[0][0]/=m[0][0];r[0][1]/=m[0][1];r[0][2]/=m[0][2];r[0][3]/=m[0][3];
        r[1][0]/=m[1][0];r[1][1]/=m[1][1];r[1][2]/=m[1][2];r[1][3]/=m[1][3];
        r[2][0]/=m[2][0];r[2][1]/=m[2][1];r[2][2]/=m[2][2];r[2][3]/=m[2][3];
        r[3][0]/=m[3][0];r[3][1]/=m[3][1];r[3][2]/=m[3][2];r[3][3]/=m[3][3];
        return r;
    }operator+=(mat4f<F> &r){
        m[0][0]+=r.m[0][0];m[0][1]+=r.m[0][1];m[0][2]+=r.m[0][2];m[0][3]+=r.m[0][3];
        m[1][0]+=r.m[1][0];m[1][1]+=r.m[1][1];m[1][2]+=r.m[1][2];m[1][3]+=r.m[1][3];
        m[2][0]+=r.m[2][0];m[2][1]+=r.m[2][1];m[2][2]+=r.m[2][2];m[2][3]+=r.m[2][3];
        m[3][0]+=r.m[3][0];m[3][1]+=r.m[3][1];m[3][2]+=r.m[3][2];m[3][3]+=r.m[3][3];
        return *this;
    }operator-=(mat4f<F> &r){
        m[0][0]-=r.m[0][0];m[0][1]-=r.m[0][1];m[0][2]-=r.m[0][2];m[0][3]-=r.m[0][3];
        m[1][0]-=r.m[1][0];m[1][1]-=r.m[1][1];m[1][2]-=r.m[1][2];m[1][3]-=r.m[1][3];
        m[2][0]-=r.m[2][0];m[2][1]-=r.m[2][1];m[2][2]-=r.m[2][2];m[2][3]-=r.m[2][3];
        m[3][0]-=r.m[3][0];m[3][1]-=r.m[3][1];m[3][2]-=r.m[3][2];m[3][3]-=r.m[3][3];
        return *this;
    }operator++(){
        ++m[0][0];++m[0][1];++m[0][2];++m[0][3];
        ++m[1][0];++m[1][1];++m[1][2];++m[1][3];
        ++m[2][0];++m[2][1];++m[2][2];++m[2][3];
        ++m[3][0];++m[3][1];++m[3][2];++m[3][3];
        return *this;
    }operator--(){
        --m[0][0];--m[0][1];--m[0][2];--m[0][3];
        --m[1][0];--m[1][1];--m[1][2];--m[1][3];
        --m[2][0];--m[2][1];--m[2][2];--m[2][3];
        --m[3][0];--m[3][1];--m[3][2];--m[3][3];
        return *this;
    }operator+=(F f){
        m[0][0]+=f;m[0][1]+=f;m[0][2]+=f;m[0][3]+=f;
        m[1][0]+=f;m[1][1]+=f;m[1][2]+=f;m[1][3]+=f;
        m[2][0]+=f;m[2][1]+=f;m[2][2]+=f;m[2][3]+=f;
        m[3][0]+=f;m[3][1]+=f;m[3][2]+=f;m[3][3]+=f;
        return *this;
    }operator-=(F f){
        m[0][0]-=f;m[0][1]-=f;m[0][2]-=f;m[0][3]-=f;
        m[1][0]-=f;m[1][1]-=f;m[1][2]-=f;m[1][3]-=f;
        m[2][0]-=f;m[2][1]-=f;m[2][2]-=f;m[2][3]-=f;
        m[3][0]-=f;m[3][1]-=f;m[3][2]-=f;m[3][3]-=f;
        return *this;
    }operator*=(F f){
        m[0][0]*=f;m[0][1]*=f;m[0][2]*=f;m[0][3]*=f;
        m[1][0]*=f;m[1][1]*=f;m[1][2]*=f;m[1][3]*=f;
        m[2][0]*=f;m[2][1]*=f;m[2][2]*=f;m[2][3]*=f;
        m[3][0]*=f;m[3][1]*=f;m[3][2]*=f;m[3][3]*=f;
        return *this;
    }operator/=(F f){
        m[0][0]/=f;m[0][1]/=f;m[0][2]/=f;m[0][3]/=f;
        m[1][0]/=f;m[1][1]/=f;m[1][2]/=f;m[1][3]/=f;
        m[2][0]/=f;m[2][1]/=f;m[2][2]/=f;m[2][3]/=f;
        m[3][0]/=f;m[3][1]/=f;m[3][2]/=f;m[3][3]/=f;
        return *this;
    }operator==(mat4f<F> &r){
        return (m[0][0]==r.m[0][0]&&m[0][1]==r.m[0][1]&&m[0][2]==r.m[0][2]&&m[0][3]==r.m[0][3]&&
                m[1][0]==r.m[1][0]&&m[1][1]==r.m[1][1]&&m[1][2]==r.m[1][2]&&m[1][3]==r.m[1][3]&&
                m[2][0]==r.m[2][0]&&m[2][1]==r.m[2][1]&&m[2][2]==r.m[2][2]&&m[2][3]==r.m[2][3]&&
                m[3][0]==r.m[3][0]&&m[3][1]==r.m[3][1]&&m[3][2]==r.m[3][2]&&m[3][3]==r.m[3][3]);
    }operator!=(mat4f<F> &r){
        return (m[0][0]!=r.m[0][0]||m[0][1]!=r.m[0][1]||m[0][2]!=r.m[0][2]||m[0][3]!=r.m[0][3]||
                m[1][0]!=r.m[1][0]||m[1][1]!=r.m[1][1]||m[1][2]!=r.m[1][2]||m[1][3]!=r.m[1][3]||
                m[2][0]!=r.m[2][0]||m[2][1]!=r.m[2][1]||m[2][2]!=r.m[2][2]||m[2][3]!=r.m[2][3]||
                m[3][0]!=r.m[3][0]||m[3][1]!=r.m[3][1]||m[3][2]!=r.m[3][2]||m[3][3]!=r.m[3][3]);
    }
};

template<typename I,typename = typename std::enable_if<std::is_integral<I>::value>::type>
struct  mat4i
{
    I m[4][4];
    operator+(mat4i<I> &r){
        r.m[0][0]+=m[0][0];r.m[0][1]+=m[0][1];r.m[0][2]+=m[0][2];r.m[0][3]+=m[0][3];
        r.m[1][0]+=m[1][0];r.m[1][1]+=m[1][1];r.m[1][2]+=m[1][2];r.m[1][3]+=m[1][3];
        r.m[2][0]+=m[2][0];r.m[2][1]+=m[2][1];r.m[2][2]+=m[2][2];r.m[2][3]+=m[2][3];
        r.m[3][0]+=m[3][0];r.m[3][1]+=m[3][1];r.m[3][2]+=m[3][2];r.m[3][3]+=m[3][3];
        return r;
    }operator-(mat4i<I> &r){
        r.m[0][0]-=m[0][0];r.m[0][1]-=m[0][1];r.m[0][2]-=m[0][2];r.m[0][3]-=m[0][3];
        r.m[1][0]-=m[1][0];r.m[1][1]-=m[1][1];r.m[1][2]-=m[1][2];r.m[1][3]-=m[1][3];
        r.m[2][0]-=m[2][0];r.m[2][1]-=m[2][1];r.m[2][2]-=m[2][2];r.m[2][3]-=m[2][3];
        r.m[3][0]-=m[3][0];r.m[3][1]-=m[3][1];r.m[3][2]-=m[3][2];r.m[3][3]-=m[3][3];
        return r;
    }operator*(mat4i<I> &r){
        mat4i<I> result;
        result.m[0][0]=m[0][0]*r.m[0][0]+m[0][1]*r.m[1][0]+m[0][2]*r.m[2][0]+m[0][3]*r.m[3][0];
        result.m[0][1]=m[0][0]*r.m[0][1]+m[0][1]*r.m[1][1]+m[0][2]*r.m[2][1]+m[0][3]*r.m[3][1];
        result.m[0][2]=m[0][0]*r.m[0][2]+m[0][1]*r.m[1][2]+m[0][2]*r.m[2][2]+m[0][3]*r.m[3][2];
        result.m[0][3]=m[0][0]*r.m[0][3]+m[0][1]*r.m[1][3]+m[0][2]*r.m[2][3]+m[0][3]*r.m[3][3];

        result.m[1][0]=m[1][0]*r.m[0][0]+m[1][1]*r.m[1][0]+m[1][2]*r.m[2][0]+m[1][3]*r.m[3][0];
        result.m[1][1]=m[1][0]*r.m[0][1]+m[1][1]*r.m[1][1]+m[1][2]*r.m[2][1]+m[1][3]*r.m[3][1];
        result.m[1][2]=m[1][0]*r.m[0][2]+m[1][1]*r.m[1][2]+m[1][2]*r.m[2][2]+m[1][3]*r.m[3][2];
        result.m[1][3]=m[1][0]*r.m[0][3]+m[1][1]*r.m[1][3]+m[1][2]*r.m[2][3]+m[1][3]*r.m[3][3];

        result.m[2][0]=m[2][0]*r.m[0][0]+m[2][1]*r.m[1][0]+m[2][2]*r.m[2][0]+m[2][3]*r.m[3][0];
        result.m[2][1]=m[2][0]*r.m[0][1]+m[2][1]*r.m[1][1]+m[2][2]*r.m[2][1]+m[2][3]*r.m[3][1];
        result.m[2][2]=m[2][0]*r.m[0][2]+m[2][1]*r.m[1][2]+m[2][2]*r.m[2][2]+m[2][3]*r.m[3][2];
        result.m[2][3]=m[2][0]*r.m[0][3]+m[2][1]*r.m[1][3]+m[2][2]*r.m[2][3]+m[2][3]*r.m[3][3];

        result.m[3][0]=m[3][0]*r.m[0][0]+m[3][1]*r.m[1][0]+m[3][2]*r.m[2][0]+m[3][3]*r.m[3][0];
        result.m[3][1]=m[3][0]*r.m[0][1]+m[3][1]*r.m[1][1]+m[3][2]*r.m[2][1]+m[3][3]*r.m[3][1];
        result.m[3][2]=m[3][0]*r.m[0][2]+m[3][1]*r.m[1][2]+m[3][2]*r.m[2][2]+m[3][3]*r.m[3][2];
        result.m[3][3]=m[3][0]*r.m[0][3]+m[3][1]*r.m[1][3]+m[3][2]*r.m[2][3]+m[3][3]*r.m[3][3];
        return result;
    }operator=(mat4i<I> &r){
        m[0][0]=r.m[0][0];m[0][1]=r.m[0][1];m[0][2]=r.m[0][2];m[0][3]=r.m[0][3];
        m[1][0]=r.m[1][0];m[1][1]=r.m[1][1];m[1][2]=r.m[1][2];m[1][3]=r.m[1][3];
        m[2][0]=r.m[2][0];m[2][1]=r.m[2][1];m[2][2]=r.m[2][2];m[2][3]=r.m[2][3];
        m[3][0]=r.m[3][0];m[3][1]=r.m[3][1];m[3][2]=r.m[3][2];m[3][3]=r.m[3][3];
        return *this;
    }operator*=(mat4i<I> &r){
        mat4i<I> temp = *this * r;
        *this = temp;
        return *this;
    }operator/=(mat4i<I> &r){
        m[0][0]/=r.m[0][0];m[0][1]/=r.m[0][1];m[0][2]/=r.m[0][2];m[0][3]/=r.m[0][3];
        m[1][0]/=r.m[1][0];m[1][1]/=r.m[1][1];m[1][2]/=r.m[1][2];m[1][3]/=r.m[1][3];
        m[2][0]/=r.m[2][0];m[2][1]/=r.m[2][1];m[2][2]/=r.m[2][2];m[2][3]/=r.m[2][3];
        m[3][0]/=r.m[3][0];m[3][1]/=r.m[3][1];m[3][2]/=r.m[3][2];m[3][3]/=r.m[3][3];
        return *this;
    }operator/(mat4i<I> &r){
        mat4i<I> result;
        result.m[0][0]=m[0][0]/r.m[0][0];result.m[0][1]=m[0][1]/r.m[0][1];result.m[0][2]=m[0][2]/r.m[0][2];result.m[0][3]=m[0][3]/r.m[0][3];
        result.m[1][0]=m[1][0]/r.m[1][0];result.m[1][1]=m[1][1]/r.m[1][1];result.m[1][2]=m[1][2]/r.m[1][2];result.m[1][3]=m[1][3]/r.m[1][3];
        result.m[2][0]=m[2][0]/r.m[2][0];result.m[2][1]=m[2][1]/r.m[2][1];result.m[2][2]=m[2][2]/r.m[2][2];result.m[2][3]=m[2][3]/r.m[2][3];
        result.m[3][0]=m[3][0]/r.m[3][0];result.m[3][1]=m[3][1]/r.m[3][1];result.m[3][2]=m[3][2]/r.m[3][2];result.m[3][3]=m[3][3]/r.m[3][3];
        return result;
    }operator+=(mat4i<I> &r){
        m[0][0]+=r.m[0][0];m[0][1]+=r.m[0][1];m[0][2]+=r.m[0][2];m[0][3]+=r.m[0][3];
        m[1][0]+=r.m[1][0];m[1][1]+=r.m[1][1];m[1][2]+=r.m[1][2];m[1][3]+=r.m[1][3];
        m[2][0]+=r.m[2][0];m[2][1]+=r.m[2][1];m[2][2]+=r.m[2][2];m[2][3]+=r.m[2][3];
        m[3][0]+=r.m[3][0];m[3][1]+=r.m[3][1];m[3][2]+=r.m[3][2];m[3][3]+=r.m[3][3];
        return *this;
    }operator-=(mat4i<I> &r){
        m[0][0]-=r.m[0][0];m[0][1]-=r.m[0][1];m[0][2]-=r.m[0][2];m[0][3]-=r.m[0][3];
        m[1][0]-=r.m[1][0];m[1][1]-=r.m[1][1];m[1][2]-=r.m[1][2];m[1][3]-=r.m[1][3];
        m[2][0]-=r.m[2][0];m[2][1]-=r.m[2][1];m[2][2]-=r.m[2][2];m[2][3]-=r.m[2][3];
        m[3][0]-=r.m[3][0];m[3][1]-=r.m[3][1];m[3][2]-=r.m[3][2];m[3][3]-=r.m[3][3];
        return *this;
    }operator++(){
        ++m[0][0];++m[0][1];++m[0][2];++m[0][3];
        ++m[1][0];++m[1][1];++m[1][2];++m[1][3];
        ++m[2][0];++m[2][1];++m[2][2];++m[2][3];
        ++m[3][0];++m[3][1];++m[3][2];++m[3][3];
        return *this;
    }operator--(){
        --m[0][0];--m[0][1];--m[0][2];--m[0][3];
        --m[1][0];--m[1][1];--m[1][2];--m[1][3];
        --m[2][0];--m[2][1];--m[2][2];--m[2][3];
        --m[3][0];--m[3][1];--m[3][2];--m[3][3];
        return *this;
    }operator+=(I i){
        m[0][0]+=i;m[0][1]+=i;m[0][2]+=i;m[0][3]+=i;
        m[1][0]+=i;m[1][1]+=i;m[1][2]+=i;m[1][3]+=i;
        m[2][0]+=i;m[2][1]+=i;m[2][2]+=i;m[2][3]+=i;
        m[3][0]+=i;m[3][1]+=i;m[3][2]+=i;m[3][3]+=i;
        return *this;
    }operator-=(I i){
        m[0][0]-=i;m[0][1]-=i;m[0][2]-=i;m[0][3]-=i;
        m[1][0]-=i;m[1][1]-=i;m[1][2]-=i;m[1][3]-=i;
        m[2][0]-=i;m[2][1]-=i;m[2][2]-=i;m[2][3]-=i;
        m[3][0]-=i;m[3][1]-=i;m[3][2]-=i;m[3][3]-=i;
        return *this;
    }operator*=(I i){
        m[0][0]*=i;m[0][1]*=i;m[0][2]*=i;m[0][3]*=i;
        m[1][0]*=i;m[1][1]*=i;m[1][2]*=i;m[1][3]*=i;
        m[2][0]*=i;m[2][1]*=i;m[2][2]*=i;m[2][3]*=i;
        m[3][0]*=i;m[3][1]*=i;m[3][2]*=i;m[3][3]*=i;
        return *this;
    }operator/=(I i){
        m[0][0]/=i;m[0][1]/=i;m[0][2]/=i;m[0][3]/=i;
        m[1][0]/=i;m[1][1]/=i;m[1][2]/=i;m[1][3]/=i;
        m[2][0]/=i;m[2][1]/=i;m[2][2]/=i;m[2][3]/=i;
        m[3][0]/=i;m[3][1]/=i;m[3][2]/=i;m[3][3]/=i;
        return *this;
    }operator==(mat4i<I> &r){
        return (m[0][0]==r.m[0][0]&&m[0][1]==r.m[0][1]&&m[0][2]==r.m[0][2]&&m[0][3]==r.m[0][3]&&
                m[1][0]==r.m[1][0]&&m[1][1]==r.m[1][1]&&m[1][2]==r.m[1][2]&&m[1][3]==r.m[1][3]&&
                m[2][0]==r.m[2][0]&&m[2][1]==r.m[2][1]&&m[2][2]==r.m[2][2]&&m[2][3]==r.m[2][3]&&
                m[3][0]==r.m[3][0]&&m[3][1]==r.m[3][1]&&m[3][2]==r.m[3][2]&&m[3][3]==r.m[3][3]);
    }operator!=(mat4i<I> &r){
        return (m[0][0]!=r.m[0][0]||m[0][1]!=r.m[0][1]||m[0][2]!=r.m[0][2]||m[0][3]!=r.m[0][3]||
                m[1][0]!=r.m[1][0]||m[1][1]!=r.m[1][1]||m[1][2]!=r.m[1][2]||m[1][3]!=r.m[1][3]||
                m[2][0]!=r.m[2][0]||m[2][1]!=r.m[2][1]||m[2][2]!=r.m[2][2]||m[2][3]!=r.m[2][3]||
                m[3][0]!=r.m[3][0]||m[3][1]!=r.m[3][1]||m[3][2]!=r.m[3][2]||m[3][3]!=r.m[3][3]);
    }operator>>=(I i){
        m[0][0]>>=i;m[0][1]>>=i;m[0][2]>>=i;m[0][3]>>=i;
        m[1][0]>>=i;m[1][1]>>=i;m[1][2]>>=i;m[1][3]>>=i;
        m[2][0]>>=i;m[2][1]>>=i;m[2][2]>>=i;m[2][3]>>=i;
        m[3][0]>>=i;m[3][1]>>=i;m[3][2]>>=i;m[3][3]>>=i;
        return *this;
    }operator>>(I i){
        m[0][0]>>i;m[0][1]>>i;m[0][2]>>i;m[0][3]>>i;
        m[1][0]>>i;m[1][1]>>i;m[1][2]>>i;m[1][3]>>i;
        m[2][0]>>i;m[2][1]>>i;m[2][2]>>i;m[2][3]>>i;
        m[3][0]>>i;m[3][1]>>i;m[3][2]>>i;m[3][3]>>i;
        return *this;
    }operator>>(mat4i<I> &r){
        m[0][0]>>=r.m[0][0];m[0][1]>>=r.m[0][1];m[0][2]>>=r.m[0][2];m[0][3]>>=r.m[0][3];
        m[1][0]>>=r.m[1][0];m[1][1]>>=r.m[1][1];m[1][2]>>=r.m[1][2];m[1][3]>>=r.m[1][3];
        m[2][0]>>=r.m[2][0];m[2][1]>>=r.m[2][1];m[2][2]>>=r.m[2][2];m[2][3]>>=r.m[2][3];
        m[3][0]>>=r.m[3][0];m[3][1]>>=r.m[3][1];m[3][2]>>=r.m[3][2];m[3][3]>>=r.m[3][3];
        return *this;
    }operator<<=(I i){
        m[0][0]<<=i;m[0][1]<<=i;m[0][2]<<=i;m[0][3]<<=i;
        m[1][0]<<=i;m[1][1]<<=i;m[1][2]<<=i;m[1][3]<<=i;
        m[2][0]<<=i;m[2][1]<<=i;m[2][2]<<=i;m[2][3]<<=i;
        m[3][0]<<=i;m[3][1]<<=i;m[3][2]<<=i;m[3][3]<<=i;
        return *this;
    }operator<<(I i){
        m[0][0]<<i;m[0][1]<<i;m[0][2]<<i;m[0][3]<<i;
        m[1][0]<<i;m[1][1]<<i;m[1][2]<<i;m[1][3]<<i;
        m[2][0]<<i;m[2][1]<<i;m[2][2]<<i;m[2][3]<<i;
        m[3][0]<<i;m[3][1]<<i;m[3][2]<<i;m[3][3]<<i;
        return *this;
    }operator<<(mat4i<I> &r){
        m[0][0]<<=r.m[0][0];m[0][1]<<=r.m[0][1];m[0][2]<<=r.m[0][2];m[0][3]<<=r.m[0][3];
        m[1][0]<<=r.m[1][0];m[1][1]<<=r.m[1][1];m[1][2]<<=r.m[1][2];m[1][3]<<=r.m[1][3];
        m[2][0]<<=r.m[2][0];m[2][1]<<=r.m[2][1];m[2][2]<<=r.m[2][2];m[2][3]<<=r.m[2][3];
        m[3][0]<<=r.m[3][0];m[3][1]<<=r.m[3][1];m[3][2]<<=r.m[3][2];m[3][3]<<=r.m[3][3];
        return *this;
    }operator&=(I i){
        m[0][0]&=i;m[0][1]&=i;m[0][2]&=i;m[0][3]&=i;
        m[1][0]&=i;m[1][1]&=i;m[1][2]&=i;m[1][3]&=i;
        m[2][0]&=i;m[2][1]&=i;m[2][2]&=i;m[2][3]&=i;
        m[3][0]&=i;m[3][1]&=i;m[3][2]&=i;m[3][3]&=i;
        return *this;
    }operator&(I i){
        m[0][0]&i;m[0][1]&i;m[0][2]&i;m[0][3]&i;
        m[1][0]&i;m[1][1]&i;m[1][2]&i;m[1][3]&i;
        m[2][0]&i;m[2][1]&i;m[2][2]&i;m[2][3]&i;
        m[3][0]&i;m[3][1]&i;m[3][2]&i;m[3][3]&i;
        return *this;
    }operator&(mat4i<I> &r){
        m[0][0]&=r.m[0][0];m[0][1]&=r.m[0][1];m[0][2]&=r.m[0][2];m[0][3]&=r.m[0][3];
        m[1][0]&=r.m[1][0];m[1][1]&=r.m[1][1];m[1][2]&=r.m[1][2];m[1][3]&=r.m[1][3];
        m[2][0]&=r.m[2][0];m[2][1]&=r.m[2][1];m[2][2]&=r.m[2][2];m[2][3]&=r.m[2][3];
        m[3][0]&=r.m[3][0];m[3][1]&=r.m[3][1];m[3][2]&=r.m[3][2];m[3][3]&=r.m[3][3];
        return *this;
    }operator|=(I i){
        m[0][0]|=i;m[0][1]|=i;m[0][2]|=i;m[0][3]|=i;
        m[1][0]|=i;m[1][1]|=i;m[1][2]|=i;m[1][3]|=i;
        m[2][0]|=i;m[2][1]|=i;m[2][2]|=i;m[2][3]|=i;
        m[3][0]|=i;m[3][1]|=i;m[3][2]|=i;m[3][3]|=i;
        return *this;
    }operator|(I i){
        m[0][0]|i;m[0][1]|i;m[0][2]|i;m[0][3]|i;
        m[1][0]|i;m[1][1]|i;m[1][2]|i;m[1][3]|i;
        m[2][0]|i;m[2][1]|i;m[2][2]|i;m[2][3]|i;
        m[3][0]|i;m[3][1]|i;m[3][2]|i;m[3][3]|i;
        return *this;
    }operator|(mat4i<I> &r){
        m[0][0]|=r.m[0][0];m[0][1]|=r.m[0][1];m[0][2]|=r.m[0][2];m[0][3]|=r.m[0][3];
        m[1][0]|=r.m[1][0];m[1][1]|=r.m[1][1];m[1][2]|=r.m[1][2];m[1][3]|=r.m[1][3];
        m[2][0]|=r.m[2][0];m[2][1]|=r.m[2][1];m[2][2]|=r.m[2][2];m[2][3]|=r.m[2][3];
        m[3][0]|=r.m[3][0];m[3][1]|=r.m[3][1];m[3][2]|=r.m[3][2];m[3][3]|=r.m[3][3];
        return *this;
    }operator^(I i){
        m[0][0]^i;m[0][1]^i;m[0][2]^i;m[0][3]^i;
        m[1][0]^i;m[1][1]^i;m[1][2]^i;m[1][3]^i;
        m[2][0]^i;m[2][1]^i;m[2][2]^i;m[2][3]^i;
        m[3][0]^i;m[3][1]^i;m[3][2]^i;m[3][3]^i;
        return *this;
    }operator^(mat4i<I> &r){
        m[0][0]^=r.m[0][0];m[0][1]^=r.m[0][1];m[0][2]^=r.m[0][2];m[0][3]^=r.m[0][3];
        m[1][0]^=r.m[1][0];m[1][1]^=r.m[1][1];m[1][2]^=r.m[1][2];m[1][3]^=r.m[1][3];
        m[2][0]^=r.m[2][0];m[2][1]^=r.m[2][1];m[2][2]^=r.m[2][2];m[2][3]^=r.m[2][3];
        m[3][0]^=r.m[3][0];m[3][1]^=r.m[3][1];m[3][2]^=r.m[3][2];m[3][3]^=r.m[3][3];
        return *this;
    }
};
